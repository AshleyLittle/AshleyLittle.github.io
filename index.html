<!DOCTYPE html>

<html>
<head>
  <title>Air Quality Map</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
    integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
    crossorigin=""/>
  <script src="script.js"></script>
  <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
    integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
    crossorigin=""></script>
  </head>

<body>
  <main>
    <h1 id="title">Air Quality by Location</h1>
    <h3 id="title">Right click on an area to see its degree of particle pollution.</h3>
    <br>
    <p id="gray">Air Quality data from <a href="https://github.com/openaq/openaq-api/blob/develop/LICENSE.md">OpenAQ</a>.</p>
    <div id="mapid"></div>
    <p id="gray"><b>Latitude: </b><span id="currentLatitude">---</span></p>
    <p id="gray"><b>Longitude: </b><span id="currentLongitude">---</span></p>
    <br>
    <p id="output">The nearest reading of particulate pollution to this location is <b><span id="aqreading">---</span> µg/m³</b> (a higher reading means that there are more particulates in the air).</p>
  </main>
</body>

<script>
  // create map and add tiles
  var map = L.map("mapid").setView([0,0], 1);
  var attribution = '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors';
  var tiles = L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution});
  tiles.addTo(map);

  // make it update on a mouseclick
  map.addEventListener("mousemove",function(ev) {
    lat = ev.latlng.lat;
    lng = ev.latlng.lng;
  })
  var lat, lng;
  document.getElementById("mapid").addEventListener("contextmenu",function(event) {
    event.preventDefault();
    document.getElementById("currentLatitude").innerHTML = lat;
    document.getElementById("currentLongitude").innerHTML = lng;
    updateData();
    return false;
  })
</script>
</html>
